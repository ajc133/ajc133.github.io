<!DOCTYPE html>
<html lang="en-us">

<head>
  
  <meta charset="utf-8">



<meta name="viewport" content="width=device-width, initial-scale=1.0">


  <meta name="description" content="Solving where Noah&#39;s Rug has gone">


<meta name="color-scheme" content="light dark">


  
  <meta itemprop="name" content="Hannukah of Data: Part 1">
  <meta itemprop="description" content="Solving where Noah&#39;s Rug has gone">
  <meta itemprop="datePublished" content="2024-11-03T16:25:04-08:00">
  <meta itemprop="dateModified" content="2024-11-03T16:25:04-08:00">
  <meta itemprop="wordCount" content="373">



  <meta property="og:url" content="https://blog.ajcajc.com/hannukah-of-data-part-1/">
  <meta property="og:site_name" content="ajcajc.com">
  <meta property="og:title" content="Hannukah of Data: Part 1">
  <meta property="og:description" content="Solving where Noah&#39;s Rug has gone">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-11-03T16:25:04-08:00">
    <meta property="article:modified_time" content="2024-11-03T16:25:04-08:00">





<meta name="generator" content="Hugo 0.134.2">
  <title>Hannukah of Data: Part 1 | ajcajc.com</title>
  <link rel="canonical" href="https://blog.ajcajc.com/hannukah-of-data-part-1/">




  




  
  
    
    
  
  





  
    
  
  
      <link rel="stylesheet" href="/css/base.min.e1f3863e7cba8d10f78ba3f591a71b75c9070e6ea08cfb22f861866e6345818d.css" integrity="sha256-4fOGPny6jRD3i6P1kacbdckHDm6gjPsi&#43;GGGbmNFgY0=" crossorigin="anonymous">

      <link rel="stylesheet" href="/css/syntax.min.0a65901677c5717450e892b7a927f5b62a8a0485acadf81b264df779dec11a8d.css" integrity="sha256-CmWQFnfFcXRQ6JK3qSf1tiqKBIWsrfgbJk33ed7BGo0=" crossorigin="anonymous">



</head>

<body>
  <nav class="u-background">
  <div class="u-wrapper">
    <ul class="Banner">
      <li class="Banner-item Banner-item--title">
        <a class="Banner-link u-clickable" href="/">ajcajc.com</a>
      </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/about/">About</a>
        </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/posts/">Posts</a>
        </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/tags/">Tags</a>
        </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/categories/">Categories</a>
        </li>
      
    </ul>
  </div>
</nav>

  <main>
    <div class="u-wrapper">
      <div class="u-padding">
        

  <header class="Heading">
  <h1 class="Heading-title">
    <a class="Heading-link u-clickable" href="/hannukah-of-data-part-1/" rel="bookmark">Hannukah of Data: Part 1</a>
  </h1>
  
    <time datetime="2024-11-03T16:25:04-08:00">November 3, 2024</time>
  
</header>
  <p><em><a href="https://hanukkah.bluebird.sh/5784/">Hannukah of Data: Noah&rsquo;s Rug</a></em> is a super fun data puzzle where you must sift through a database from Noah&rsquo;s Market, &ldquo;a bustling mom-and-pop everything store in Manhattan&rdquo;, and find past customers who can help you find Noah&rsquo;s Rug.</p>
<p>I&rsquo;m going to attempt the challenges with a mix of Python and SQL.
I&rsquo;ll try using <a href="https://docs.pola.rs/">Polars</a>, a new DataFrame library which seems more intuitive to me than Pandas.
I know I&rsquo;ll be bailing out and using SQL as the tasks get harder, though.</p>
<p>Part 0 is getting access to the database files, which I&rsquo;ll leave as an exercise to the reader.</p>
<p>I&rsquo;ll also be leaving most of the challenge description/story out of this, but I really recommend playing along because it&rsquo;s funny story that plays out.</p>



<h1 id="part-1-the-investigator">
  <a class="Heading-link u-clickable" href="/hannukah-of-data-part-1/#part-1-the-investigator">Part 1: The Investigator</a>
</h1>
<p>The goal is to find the customer whose phone number is equivalent to their last name spelled out (when translated into 10-key phone number presses).
For those unfamiliar with spelling out words with phone numbers, &ldquo;SAM&rdquo; would be &ldquo;726&rdquo; and &ldquo;NOAH&rdquo; would be &ldquo;6624&rdquo;.</p>
<figure><img src="/retro-cell-phone-keypad.png"
    alt="10-key phone keyboard">
</figure>

<p>First, we&rsquo;ll need a function that converts a string (last name) to a phone number.
Then, we&rsquo;ll need to run that function on everyone&rsquo;s last name and see if it matches their phone number.</p>

  

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> polars <span style="color:#66d9ef">as</span> pl
</span></span><span style="display:flex;"><span>customers <span style="color:#f92672">=</span> pl<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#34;data/noahs-customers.csv&#34;</span>,try_parse_dates<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)</span></span></code></pre></div>

  

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">letter_to_number</span>(letter: str) <span style="color:#f92672">-&gt;</span> str:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(letter) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">ValueError</span>(<span style="color:#e6db74">&#34;You can only pass one letter at a time&#34;</span>)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>    letter <span style="color:#f92672">=</span> letter<span style="color:#f92672">.</span>lower()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> letter <span style="color:#f92672">in</span> <span style="color:#e6db74">&#34;abc&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> letter <span style="color:#f92672">in</span> <span style="color:#e6db74">&#34;def&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> letter <span style="color:#f92672">in</span> <span style="color:#e6db74">&#34;ghi&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;4&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> letter <span style="color:#f92672">in</span> <span style="color:#e6db74">&#34;jkl&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;5&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> letter <span style="color:#f92672">in</span> <span style="color:#e6db74">&#34;mno&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;6&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> letter <span style="color:#f92672">in</span> <span style="color:#e6db74">&#34;pqrs&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;7&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> letter <span style="color:#f92672">in</span> <span style="color:#e6db74">&#34;tuv&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;8&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">elif</span> letter <span style="color:#f92672">in</span> <span style="color:#e6db74">&#34;wxyz&#34;</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;9&#34;</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">name_to_number</span>(name: str) <span style="color:#f92672">-&gt;</span> str:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">.</span>join([letter_to_number(l) <span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> name <span style="color:#66d9ef">if</span> l<span style="color:#f92672">.</span>isalpha()])</span></span></code></pre></div>

  

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Solution</span>
</span></span><span style="display:flex;"><span>last_names_translated <span style="color:#f92672">=</span> customers<span style="color:#f92672">.</span>select(
</span></span><span style="display:flex;"><span>    pl<span style="color:#f92672">.</span>col(<span style="color:#e6db74">&#34;name&#34;</span>)<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>extract(<span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;(.+) (.+)&#34;</span>, group_index<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">.</span>map_elements(name_to_number, return_dtype<span style="color:#f92672">=</span>pl<span style="color:#f92672">.</span>String)<span style="color:#f92672">.</span>alias(<span style="color:#e6db74">&#34;name_number&#34;</span>),
</span></span><span style="display:flex;"><span>    pl<span style="color:#f92672">.</span>col(<span style="color:#e6db74">&#34;name&#34;</span>),pl<span style="color:#f92672">.</span>col(<span style="color:#e6db74">&#34;phone&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>last_names_translated<span style="color:#f92672">.</span>filter(pl<span style="color:#f92672">.</span>col(<span style="color:#e6db74">&#34;name_number&#34;</span>) <span style="color:#f92672">==</span> pl<span style="color:#f92672">.</span>col(<span style="color:#e6db74">&#34;phone&#34;</span>)<span style="color:#f92672">.</span>str<span style="color:#f92672">.</span>replace_all(<span style="color:#e6db74">&#34;-&#34;</span>,<span style="color:#e6db74">&#34;&#34;</span>))</span></span></code></pre></div>



<h1 id="explanation">
  <a class="Heading-link u-clickable" href="/hannukah-of-data-part-1/#explanation">Explanation</a>
</h1>
<p>The solution code selects the &ldquo;name&rdquo; column in the customers table, extracts the last name, and runs the <code>name_to_number</code> function function on it.
The second line then filters all the rows where the above &ldquo;last name translated to phone number&rdquo; (here I called the new column <code>name_number</code>) is equal to the the phone number.
Luckily there was only one person!</p>

  

  

  





  <footer>
    
      
        <ul class="Tags">
          
        </ul>
      
    
      
        <ul class="Tags">
          
        </ul>
      
    
  </footer>

  
  



      </div>
    </div>
  </main>
  
  <footer class="Footer">
    <div class="u-wrapper">
      <div class="u-padding u-noboosting">
        <a href="http://creativecommons.org/licenses/by/4.0/" rel="license"> Creative Commons Attribution 4.0 International License</a>.
      </div>
    </div>
  </footer>

</body>

</html>
