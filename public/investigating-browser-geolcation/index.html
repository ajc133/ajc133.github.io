<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  
  <meta charset="utf-8">



<meta name="viewport" content="width=device-width, initial-scale=1.0">


  <meta name="description" content="Investigating Firefox’s Geolocation Feature">


<meta name="color-scheme" content="light dark">


  
  <meta itemprop="name" content="How to share location without gps">
  <meta itemprop="description" content="Investigating Firefox’s Geolocation Feature">
  <meta itemprop="datePublished" content="2024-10-11T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-10-11T00:00:00+00:00">
  <meta itemprop="wordCount" content="340">



  <meta property="og:url" content="http://localhost:1313/investigating-browser-geolcation/">
  <meta property="og:site_name" content="ajcajc.com">
  <meta property="og:title" content="How to share location without gps">
  <meta property="og:description" content="Investigating Firefox’s Geolocation Feature">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-10-11T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-10-11T00:00:00+00:00">





<meta name="generator" content="Hugo 0.134.2">
  <title>How to share location without gps | ajcajc.com</title>
  <link rel="canonical" href="http://localhost:1313/investigating-browser-geolcation/">




  








  
    
  
  
    <link rel="stylesheet" href="/css/base.css">



</head>

<body>
  <nav class="u-background">
  <div class="u-wrapper">
    <ul class="Banner">
      <li class="Banner-item Banner-item--title">
        <a class="Banner-link u-clickable" href="/">ajcajc.com</a>
      </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/about/">About</a>
        </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/posts/">Posts</a>
        </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/tags/">Tags</a>
        </li>
      
        
        
        <li class="Banner-item">
          <a class="Banner-link u-clickable" href="/categories/">Categories</a>
        </li>
      
    </ul>
  </div>
</nav>

  <main>
    <div class="u-wrapper">
      <div class="u-padding">
        

  <header class="Heading">
  <h1 class="Heading-title">
    <a class="Heading-link u-clickable" href="/investigating-browser-geolcation/" rel="bookmark">How to share location without gps</a>
  </h1>
  
    <time datetime="2024-10-11T00:00:00Z">October 11, 2024</time>
  
</header>
  <figure><img src="/allow-access-question.png"
    alt="Browser pop-up asking if I&#39;d like to allow google.com to access my location"><figcaption>
      <h4>Location request browser pop-up</h4>
    </figcaption>
</figure>

<p>How does location sharing work when my computer doesn&rsquo;t have GPS?</p>
<p>If I open my laptop, open Google Maps, and allow it to access my location, it returns my location to within 20 meters!
How can that possibly work without GPS?</p>
<p>Clicking <a href="https://www.mozilla.org/en-US/firefox/geolocation/">Learn more</a> in the above pop-up tells me:</p>
<blockquote>
<p>By default, Firefox uses Google Location Services to determine your location by sending:</p>
</blockquote>
<ul>
<li>your computer’s IP address,</li>
<li>information about the nearby wireless access points, and</li>
<li>a random client identifier, which is assigned by Google, that expires every 2 weeks.</li>
</ul>
<p>The first two are data points gathered by my laptop:</p>



<h2 id="my-computers-ip-address">
  <a class="Heading-link u-clickable" href="/investigating-browser-geolcation/#my-computers-ip-address">My computer&rsquo;s IP address</a>
</h2>
<p>You can normally get within the same city when using IP addresses for geolocation, so it&rsquo;s not accurate enough. Read more about <a href="https://whatismyipaddress.com/geolocation">IP address geolocation here</a>.</p>
<p>You can also try looking up your own IP address on any IP geolocation website. <a href="https://www.iplocation.net/ip-lookup">IPLocation.net</a> gives you results from multiple services.</p>



<h2 id="nearby-wireless-access-points">
  <a class="Heading-link u-clickable" href="/investigating-browser-geolcation/#nearby-wireless-access-points">Nearby wireless access points</a>
</h2>
<p>This refers to the various WiFi networks that my computer can see. So high accuracy geolocation comes from WiFi!</p>
<p><strong>How does Google determine location from WiFi??</strong></p>
<p>Google has been collecting data on WiFi networks for years. It <a href="http://static.googleusercontent.com/media/www.google.com/en//googleblogs/pdfs/google_submission_dpas_wifi_collection.pdf">stated back in 2010</a> that it uses Google Street View cars to collect WiFi data in our neighborhoods. They store the WiFi networks they detect + the car’s GPS coordinates for future use.</p>
<p>So when Firefox send Google my nearby WiFi networks, it looks up where it last saw that combination of WiFi networks (which was in my neighborhood) and replies with the coordinates it stored.</p>



<h1 id="can-we-see-the-data-that-firefox-is-sending">
  <a class="Heading-link u-clickable" href="/investigating-browser-geolcation/#can-we-see-the-data-that-firefox-is-sending">Can we see the data that Firefox is sending?</a>
</h1>



<h2 id="using-developer-tools">
  <a class="Heading-link u-clickable" href="/investigating-browser-geolcation/#using-developer-tools">Using Developer Tools</a>
</h2>
<p>I want to see if I can intercept the request that Firefox sends to Google. So I set up a basic webpage that uses Javascript to request the user’s location from the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API">Geolocation API</a> and display it on a map.</p>
<figure><img src="/dev-tools-screenshot.png"
    alt="Developer Tools screenshot showing no http requests to any API after clicking &#39;Allow&#39; on the Location Services pop-up"><figcaption>
      <h4>Where are my geolocation requests?</h4>
    </figcaption>
</figure>

<p>Ok, so it turns out that Firefox doesn&rsquo;t record those geolocation API requests in the developer tools.</p>



<h2 id="using-an-https-proxy">
  <a class="Heading-link u-clickable" href="/investigating-browser-geolcation/#using-an-https-proxy">Using an HTTP(s) Proxy</a>
</h2>

  

  

  





  <footer>
    
      
        <ul class="Tags">
          
        </ul>
      
    
      
        <ul class="Tags">
          
        </ul>
      
    
  </footer>

  
  



      </div>
    </div>
  </main>
  
  <footer class="Footer">
    <div class="u-wrapper">
      <div class="u-padding u-noboosting">
        <a href="http://creativecommons.org/licenses/by/4.0/" rel="license"> Creative Commons Attribution 4.0 International License</a>.
      </div>
    </div>
  </footer>

</body>

</html>
